{"ast":null,"code":"import _defineProperty from \"/Users/God/Desktop/github/Port/react-portfolio/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/God/Desktop/github/Port/react-portfolio/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/God/Desktop/github/Port/react-portfolio/client/src/App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport AuthContext from './context/AuthContext';\nimport TokenStore from './lib/TokenStore';\nimport Home from './pages/Home/home';\nimport Contact from './pages/Main/Contact';\nimport Landing from './pages/Landing/Landing';\n\nvar App = function App() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      didMount = _useState2[0],\n      setDidMount = _useState2[1];\n\n  var handleLogin = function handleLogin(user, authToken) {\n    TokenStore.setToken(authToken);\n    setAuth(_objectSpread({}, auth, {\n      user: user,\n      authToken: authToken\n    }));\n  };\n\n  var updateLoaded = function updateLoaded(user, isLoaded, newStory) {\n    setAuth(_objectSpread({}, auth, {\n      user: user,\n      isLoaded: isLoaded,\n      newStory: newStory\n    }));\n  };\n\n  var updateDidMount = function updateDidMount() {\n    setDidMount(false);\n  };\n\n  var updateNewStory = function updateNewStory(user, newStory) {\n    setAuth(_objectSpread({}, auth, {\n      user: user,\n      newStory: newStory\n    }));\n  };\n\n  var _useState3 = useState({\n    user: undefined,\n    isLoaded: false,\n    newStory: false,\n    authToken: TokenStore.getToken(),\n    onLogin: handleLogin,\n    updateLoaded: updateLoaded,\n    updateDidMount: updateDidMount,\n    updateNewStory: updateNewStory\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      auth = _useState4[0],\n      setAuth = _useState4[1];\n\n  useEffect(function () {\n    if (!auth.user) {\n      return;\n    }\n\n    fetch('/api/users/portfolio').then(function (res) {\n      return res.json();\n    }).then(function (user) {\n      var isLoaded = true;\n      return setAuth(_objectSpread({}, auth, {\n        user: user,\n        isLoaded: isLoaded\n      }));\n    }).catch(function (err) {\n      return;\n    });\n  }, [auth]);\n  useEffect(function () {\n    if (!auth.newStory && auth.isLoaded) {\n      return;\n    }\n\n    fetch('/api/users/portfolio').then(function (res) {\n      return res.json();\n    }).then(function (user) {\n      var isLoaded = true;\n      return setAuth(_objectSpread({}, auth, {\n        user: user,\n        isLoaded: isLoaded\n      }));\n    }).catch(function (err) {});\n  }, [auth]);\n  return React.createElement(AuthContext.Provider, {\n    value: auth,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: Landing,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/showcase\",\n    component: Home,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/contact\",\n    component: Contact,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }))));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/God/Desktop/github/Port/react-portfolio/client/src/App.js"],"names":["React","useEffect","useState","Switch","Route","AuthContext","TokenStore","Home","Contact","Landing","App","didMount","setDidMount","handleLogin","user","authToken","setToken","setAuth","auth","updateLoaded","isLoaded","newStory","updateDidMount","updateNewStory","undefined","getToken","onLogin","fetch","then","res","json","catch","err"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Switch, Route } from 'react-router-dom';\n\nimport AuthContext from './context/AuthContext';\nimport TokenStore from './lib/TokenStore';\n\nimport Home from './pages/Home/home';\nimport Contact from './pages/Main/Contact';\nimport Landing from './pages/Landing/Landing';\n\nconst App = () => {\n\n  const [didMount, setDidMount] = useState(false);\n\n  const handleLogin = (user, authToken) => {\n    TokenStore.setToken(authToken);\n    setAuth({ ...auth, user, authToken });\n  };\n  \n  const updateLoaded = (user, isLoaded, newStory) => {\n    setAuth({...auth, user, isLoaded, newStory});\n  };\n\n  const updateDidMount = () => {\n    setDidMount(false);\n  };\n  \n  const updateNewStory = (user, newStory) => {\n    setAuth({ ...auth, user, newStory });\n  };\n\n  const [auth, setAuth] = useState({\n    user: undefined,\n    isLoaded: false,\n    newStory: false,\n    authToken: TokenStore.getToken(),\n    onLogin: handleLogin,\n    updateLoaded: updateLoaded,\n    updateDidMount: updateDidMount,\n    updateNewStory: updateNewStory,\n  });\n\n  useEffect(() => {\n    if (!auth.user) { return }\n    fetch('/api/users/portfolio')\n      .then(res => res.json())\n      .then((user) => {\n        const isLoaded = true;\n        return setAuth({ ...auth, user, isLoaded })\n      })\n      .catch(err => { return });\n  }, [auth]);\n\n  useEffect(() => {\n\n    if ( (!auth.newStory) && (auth.isLoaded) ) { return }\n\n    fetch('/api/users/portfolio')\n      .then(res => res.json())\n      .then((user) => {\n        const isLoaded = true;\n        return setAuth({ ...auth, user, isLoaded })\n      })\n      .catch(err => {});\n  }, [auth]);\n\n  return (\n    <AuthContext.Provider value={auth}>\n\n      <div className=\"App\">\n\n        <Switch>\n            <Route exact path=\"/\" component={Landing} />\n            <Route exact path=\"/showcase\" component={Home} />\n            <Route path=\"/contact\" component={Contact} />\n        </Switch>\n\n      </div>\n\n    </AuthContext.Provider>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}