{"ast":null,"code":"import _slicedToArray from \"/Users/God/Desktop/github/Port/portfolio/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/God/Desktop/github/Port/portfolio/client/src/components/Social/EditSettings/EditPassword.js\";\nimport React, { useState, useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Paper, Stepper, Step, StepLabel, Button, Typography, InputLabel, Input, FormControl, TextField } from '@material-ui/core';\nimport AuthContext from '../../../context/AuthContext';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      width: '50%',\n      padding: '20px',\n      position: 'absolute',\n      top: '50%',\n      transform: 'translate(0%, -50%)'\n    },\n    button: {\n      display: 'block',\n      margin: '0 auto'\n    },\n    instructions: {\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1),\n      textAlign: 'center'\n    },\n    inputDiv: {\n      display: 'flex',\n      justifyContent: 'center'\n    },\n    fields: {\n      margin: '10px 0px'\n    },\n    email: {\n      width: '100%',\n      margin: '10px 0px'\n    },\n    formDiv: {\n      width: '100%'\n    },\n    form: {\n      width: '70%',\n      margin: '0 auto'\n    },\n    err: {\n      color: 'red',\n      textAlign: 'center'\n    }\n  };\n});\n\nfunction getSteps() {\n  return ['Confirm Password', 'Change Password'];\n}\n\nfunction getStepContent(step) {\n  console.log(step);\n\n  switch (step) {\n    case 0:\n      return 'Authentication';\n\n    case 1:\n      return 'Enter your new password';\n\n    default:\n      return 'Unknown step...';\n  }\n}\n\nfunction EditPassword() {\n  var _React$useState = React.useState(0),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      activeStep = _React$useState2[0],\n      setActiveStep = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      passwordAuth = _React$useState4[0],\n      setPasswordAuth = _React$useState4[1];\n\n  var _React$useState5 = React.useState(''),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      passwordInput = _React$useState6[0],\n      setPasswordInput = _React$useState6[1];\n\n  var _React$useState7 = React.useState(''),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      confirmInput = _React$useState8[0],\n      setConfirmInput = _React$useState8[1];\n\n  var _React$useState9 = React.useState(null),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      passwordErr = _React$useState10[0],\n      setPasswordErr = _React$useState10[1];\n\n  var _React$useState11 = React.useState(''),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      newPassword = _React$useState12[0],\n      setNewPassword = _React$useState12[1];\n\n  var steps = getSteps();\n  var classes = useStyles();\n  var auth = useContext(AuthContext);\n\n  function handlePassword(e) {\n    e.preventDefault();\n    var email = auth.user.email;\n    console.log(passwordInput, confirmInput);\n    console.log(email);\n\n    if (passwordInput === confirmInput) {\n      fetch('/api/users/passwordCheck', {\n        method: 'POST',\n        body: JSON.stringify({\n          email: email,\n          password: passwordInput\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (response) {\n        console.log(response);\n\n        if (response === 'Match') {\n          setPasswordAuth(true);\n          setActiveStep(function (prevActiveStep) {\n            return prevActiveStep + 1;\n          });\n          setPasswordErr(null);\n        }\n\n        if (response === 'Not Authorized') {\n          setPasswordErr(response);\n        }\n      });\n    } else {\n      console.log('The passwords do not match!');\n      setPasswordErr('The passwords do not match!');\n    }\n  }\n\n  function handlePasswordChange(e) {\n    e.preventDefault();\n    var username = auth.user.username;\n    console.log(username);\n    fetch('/api/users/passwordChange', {\n      method: 'POST',\n      body: JSON.stringify({\n        username: username,\n        password: newPassword\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (response) {\n      console.log(response);\n      setActiveStep(function (prevActiveStep) {\n        return prevActiveStep + 1;\n      });\n    });\n  }\n\n  function handleInputChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    console.log(name, value);\n\n    if (name === 'password') {\n      return setPasswordInput(value);\n    }\n\n    if (name === 'confirm') {\n      return setConfirmInput(value);\n    }\n\n    if (name === 'email') {\n      return setNewPassword(value);\n    }\n  }\n\n  function renderForm() {\n    if (!passwordAuth) {\n      return React.createElement(\"form\", {\n        className: classes.form,\n        onSubmit: handlePassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        className: classes.fields,\n        required: true,\n        label: \"Enter Password\",\n        onChange: handleInputChange,\n        value: passwordInput,\n        name: \"password\",\n        type: \"password\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        className: classes.fields,\n        required: true,\n        label: \"Confirm Password\",\n        onChange: handleInputChange,\n        value: confirmInput,\n        name: \"confirm\",\n        type: \"password\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        type: \"submit\",\n        className: classes.button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, activeStep === steps.length - 1 ? 'Finish' : 'Next'));\n    }\n\n    if (passwordAuth) {\n      return React.createElement(\"form\", {\n        className: classes.form,\n        onSubmit: handlePasswordChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        className: classes.fields,\n        type: \"password\",\n        required: true,\n        label: \"New Password\",\n        onChange: handleInputChange,\n        value: newPassword,\n        name: \"email\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        type: \"submit\",\n        className: classes.button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, activeStep === steps.length - 1 ? 'Finish' : 'Next'));\n    }\n  }\n\n  return React.createElement(Paper, {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, React.createElement(Stepper, {\n    activeStep: activeStep,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, steps.map(function (label, index) {\n    var stepProps = {};\n    var labelProps = {};\n    return React.createElement(Step, Object.assign({\n      key: label\n    }, stepProps, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(StepLabel, Object.assign({}, labelProps, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }), label));\n  })), React.createElement(\"div\", {\n    className: classes.inputDiv,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, activeStep === steps.length ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    className: classes.instructions,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, \"Password has been successfully changed!\")) : React.createElement(\"div\", {\n    className: classes.formDiv,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    className: classes.instructions,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, getStepContent(activeStep)), React.createElement(Typography, {\n    className: classes.err,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, passwordErr ? passwordErr : ''), renderForm(), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }))));\n}\n\nexport default EditPassword;","map":{"version":3,"sources":["/Users/God/Desktop/github/Port/portfolio/client/src/components/Social/EditSettings/EditPassword.js"],"names":["React","useState","useContext","makeStyles","Paper","Stepper","Step","StepLabel","Button","Typography","InputLabel","Input","FormControl","TextField","AuthContext","useStyles","theme","root","width","padding","position","top","transform","button","display","margin","instructions","marginTop","spacing","marginBottom","textAlign","inputDiv","justifyContent","fields","email","formDiv","form","err","color","getSteps","getStepContent","step","console","log","EditPassword","activeStep","setActiveStep","passwordAuth","setPasswordAuth","passwordInput","setPasswordInput","confirmInput","setConfirmInput","passwordErr","setPasswordErr","newPassword","setNewPassword","steps","classes","auth","handlePassword","e","preventDefault","user","fetch","method","body","JSON","stringify","password","headers","then","res","json","response","prevActiveStep","handlePasswordChange","username","handleInputChange","target","name","value","renderForm","length","map","label","index","stepProps","labelProps"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Paper, Stepper, Step, StepLabel, Button, Typography, InputLabel, Input, FormControl, TextField } from '@material-ui/core';\nimport AuthContext from '../../../context/AuthContext';\n\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        width: '50%',\n        padding: '20px',\n        position: 'absolute',\n        top: '50%',\n        transform: 'translate(0%, -50%)'\n    },\n    button: {\n        display: 'block',\n        margin: '0 auto',\n    },\n    instructions: {\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        textAlign: 'center',\n    },\n    inputDiv: {\n        display: 'flex',\n        justifyContent: 'center',\n    },\n    fields: {\n        margin: '10px 0px',\n    },\n    email: {\n        width: '100%',\n        margin: '10px 0px',\n    },\n    formDiv: {\n        width: '100%',\n    },\n    form: {\n        width: '70%',\n        margin: '0 auto',\n    },\n    err: {\n        color: 'red',\n        textAlign: 'center',\n    },\n}));\n\nfunction getSteps() {\n    return ['Confirm Password', 'Change Password'];\n}\n\n    function getStepContent(step) {\n        console.log(step)\n        switch (step) {\n            case 0:\n                return 'Authentication';\n            case 1: \n                return 'Enter your new password';\n            default:\n                return 'Unknown step...';\n        }\n    }\n\n\nfunction EditPassword() {\n    \n    const [activeStep, setActiveStep] = React.useState(0);\n    \n    const [passwordAuth, setPasswordAuth] = React.useState(false);\n    const [passwordInput, setPasswordInput] = React.useState('');\n    const [confirmInput, setConfirmInput] = React.useState('');  \n    const [passwordErr, setPasswordErr] = React.useState(null);  \n    \n    const [newPassword, setNewPassword] = React.useState('');\n\n    const steps = getSteps();\n    const classes = useStyles();\n    const auth = useContext(AuthContext);\n\n    function handlePassword(e) {\n        e.preventDefault();\n        const email = auth.user.email\n        console.log(passwordInput, confirmInput);\n        console.log(email)\n        if(passwordInput === confirmInput) {\n            fetch('/api/users/passwordCheck', {\n                method: 'POST',\n                body: JSON.stringify({email: email, password: passwordInput}),\n                headers: {'Content-Type': 'application/json'}\n            }).then(res => res.json())\n            .then((response) => {\n                console.log(response);\n                if(response === 'Match'){setPasswordAuth(true); setActiveStep(prevActiveStep => prevActiveStep + 1); setPasswordErr(null)}\n                if(response === 'Not Authorized'){setPasswordErr(response)}\n            })\n        } \n        else {\n            console.log('The passwords do not match!')\n            setPasswordErr('The passwords do not match!')\n        }\n    }\n\n    function handlePasswordChange(e) {\n        e.preventDefault();\n        const username = auth.user.username;\n        console.log(username)\n        fetch('/api/users/passwordChange', {\n            method: 'POST',\n            body: JSON.stringify({username: username, password: newPassword}),\n            headers: {'Content-Type': 'application/json'}\n        }).then(res => res.json())\n        .then((response) => {\n            console.log(response);\n            setActiveStep(prevActiveStep => prevActiveStep + 1);\n        })\n    }\n\n    function handleInputChange(e) {\n        const { name, value } = e.target\n        console.log(name, value);\n        if(name === 'password'){return setPasswordInput(value)}\n        if(name === 'confirm'){return setConfirmInput(value)}\n        if(name === 'email'){return setNewPassword(value)}\n    }\n\n    function renderForm() {\n        if(!passwordAuth){\n            return (\n                <form className={classes.form} onSubmit={handlePassword}>\n                    <TextField className={classes.fields} required label=\"Enter Password\" onChange={handleInputChange} value={passwordInput} name=\"password\" type=\"password\" variant=\"outlined\" /> \n                    <TextField className={classes.fields} required label=\"Confirm Password\" onChange={handleInputChange} value={confirmInput} name=\"confirm\" type=\"password\" variant=\"outlined\"  />\n                    <Button variant=\"contained\" color=\"primary\" type=\"submit\" className={classes.button}>\n                        {activeStep === steps.length - 1 ? 'Finish' : 'Next'}\n                    </Button>\n                </form>\n            );\n        }\n        if(passwordAuth){\n            return (\n                <form className={classes.form} onSubmit={handlePasswordChange}>\n                    <TextField className={classes.fields} type=\"password\" required label=\"New Password\" onChange={handleInputChange} value={newPassword} name=\"email\" variant=\"outlined\"  />\n                    <Button variant=\"contained\" color=\"primary\" type=\"submit\" className={classes.button}>\n                        {activeStep === steps.length - 1 ? 'Finish' : 'Next'}\n                    </Button>\n                </form>\n            );\n        }\n    }\n\n    return (\n        \n        <Paper className={classes.root}>\n            <Stepper activeStep={activeStep}>\n                {steps.map((label, index) => {\n                    const stepProps = {};\n                    const labelProps = {};\n                    return (\n                        <Step key={label} {...stepProps}>\n                            <StepLabel {...labelProps}>{label}</StepLabel>\n                        </Step>\n                    );\n                })}\n            </Stepper>\n            <div className={classes.inputDiv}>\n            {activeStep === steps.length ? (\n                    <div>\n                        <Typography className={classes.instructions}>\n                            Password has been successfully changed!\n                        </Typography>\n                    </div>\n                ): (\n                    <div className={classes.formDiv}>\n                        <Typography className={classes.instructions}>\n                            {getStepContent(activeStep)}\n                        </Typography>\n                        <Typography className={classes.err}>\n                            {passwordErr ? passwordErr : ''}\n                        </Typography>\n                        {renderForm()}\n                    <div>\n                    </div>\n                    </div>\n                )}\n            </div>\n        </Paper>\n    );\n\n}\n\nexport default EditPassword;"]},"metadata":{},"sourceType":"module"}