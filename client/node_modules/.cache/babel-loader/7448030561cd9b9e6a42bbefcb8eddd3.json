{"ast":null,"code":"import _defineProperty from \"/Users/God/Desktop/github/Port/react-portfolio/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/God/Desktop/github/Port/react-portfolio/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/God/Desktop/github/Port/react-portfolio/client/src/App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport AuthContext from './context/AuthContext';\nimport TokenStore from './lib/TokenStore';\nimport Home from './pages/Home/home';\nimport Contact from './pages/Main/Contact';\nimport Landing from './pages/Landing/Landing';\n\nvar App = function App() {\n  var _useState = useState({\n    user: undefined,\n    isLoaded: false,\n    newStory: false,\n    authToken: TokenStore.getToken(),\n    onLogin: handleLogin,\n    updateLoaded: updateLoaded,\n    updateDidMount: updateDidMount,\n    updateNewStory: updateNewStory\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      auth = _useState2[0],\n      setAuth = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      didMount = _useState4[0],\n      setDidMount = _useState4[1];\n\n  var handleLogin = function handleLogin(user, authToken) {\n    TokenStore.setToken(authToken);\n    setAuth(_objectSpread({}, auth, {\n      user: user,\n      authToken: authToken\n    }));\n  };\n\n  function updateLoaded(user, isLoaded, newStory) {\n    setAuth(_objectSpread({}, auth, {\n      user: user,\n      isLoaded: isLoaded,\n      newStory: newStory\n    }));\n  }\n\n  function updateDidMount() {\n    setDidMount(false);\n  }\n\n  function updateNewStory(user, newStory) {\n    setAuth(_objectSpread({}, auth, {\n      user: user,\n      newStory: newStory\n    }));\n  }\n\n  useEffect(function () {\n    if (!auth.user) {\n      return;\n    }\n\n    fetch('/api/users/portfolio').then(function (res) {\n      return res.json();\n    }).then(function (user) {\n      var isLoaded = true;\n      return setAuth(_objectSpread({}, auth, {\n        user: user,\n        isLoaded: isLoaded\n      }));\n    }).catch(function (err) {\n      return;\n    });\n  }, [auth]);\n  useEffect(function () {\n    if (!auth.newStory && auth.isLoaded) {\n      return;\n    }\n\n    fetch('/api/users/portfolio').then(function (res) {\n      return res.json();\n    }).then(function (user) {\n      var isLoaded = true;\n      return setAuth(_objectSpread({}, auth, {\n        user: user,\n        isLoaded: isLoaded\n      }));\n    }).catch(function (err) {});\n  }, [auth]);\n  return React.createElement(AuthContext.Provider, {\n    value: auth,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: Landing,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/showcase\",\n    component: Home,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/contact\",\n    component: Contact,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }))));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/God/Desktop/github/Port/react-portfolio/client/src/App.js"],"names":["React","useEffect","useState","Switch","Route","Redirect","AuthContext","TokenStore","Home","Contact","Landing","App","user","undefined","isLoaded","newStory","authToken","getToken","onLogin","handleLogin","updateLoaded","updateDidMount","updateNewStory","auth","setAuth","didMount","setDidMount","setToken","fetch","then","res","json","catch","err"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,QAAxB,QAAwC,kBAAxC;AAEA,OAAOC,WAAP,MAAwB,uBAAxB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AAEA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,OAAOC,OAAP,MAAoB,yBAApB;;AAEA,IAAMC,GAAG,GAAG,SAANA,GAAM,GAAM;AAAA,kBAEQT,QAAQ,CAAC;AAC/BU,IAAAA,IAAI,EAAEC,SADyB;AAE/BC,IAAAA,QAAQ,EAAE,KAFqB;AAG/BC,IAAAA,QAAQ,EAAE,KAHqB;AAI/BC,IAAAA,SAAS,EAAET,UAAU,CAACU,QAAX,EAJoB;AAK/BC,IAAAA,OAAO,EAAEC,WALsB;AAM/BC,IAAAA,YAAY,EAAEA,YANiB;AAO/BC,IAAAA,cAAc,EAAEA,cAPe;AAQ/BC,IAAAA,cAAc,EAAEA;AARe,GAAD,CAFhB;AAAA;AAAA,MAETC,IAFS;AAAA,MAEHC,OAFG;;AAAA,mBAagBtB,QAAQ,CAAC,KAAD,CAbxB;AAAA;AAAA,MAaTuB,QAbS;AAAA,MAaCC,WAbD;;AAehB,MAAMP,WAAW,GAAG,SAAdA,WAAc,CAACP,IAAD,EAAOI,SAAP,EAAqB;AACvCT,IAAAA,UAAU,CAACoB,QAAX,CAAoBX,SAApB;AACAQ,IAAAA,OAAO,mBAAMD,IAAN;AAAYX,MAAAA,IAAI,EAAJA,IAAZ;AAAkBI,MAAAA,SAAS,EAATA;AAAlB,OAAP;AACD,GAHD;;AAKA,WAASI,YAAT,CAAsBR,IAAtB,EAA4BE,QAA5B,EAAsCC,QAAtC,EAAgD;AAC9CS,IAAAA,OAAO,mBAAKD,IAAL;AAAWX,MAAAA,IAAI,EAAJA,IAAX;AAAiBE,MAAAA,QAAQ,EAARA,QAAjB;AAA2BC,MAAAA,QAAQ,EAARA;AAA3B,OAAP;AACD;;AAED,WAASM,cAAT,GAA0B;AACxBK,IAAAA,WAAW,CAAC,KAAD,CAAX;AACD;;AAED,WAASJ,cAAT,CAAwBV,IAAxB,EAA8BG,QAA9B,EAAwC;AACtCS,IAAAA,OAAO,mBAAKD,IAAL;AAAWX,MAAAA,IAAI,EAAJA,IAAX;AAAiBG,MAAAA,QAAQ,EAARA;AAAjB,OAAP;AACD;;AAEDd,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI,CAACsB,IAAI,CAACX,IAAV,EAAgB;AAAE;AAAQ;;AAC1BgB,IAAAA,KAAK,CAAC,sBAAD,CAAL,CACGC,IADH,CACQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KADX,EAEGF,IAFH,CAEQ,UAACjB,IAAD,EAAU;AACd,UAAME,QAAQ,GAAG,IAAjB;AACA,aAAOU,OAAO,mBAAMD,IAAN;AAAYX,QAAAA,IAAI,EAAJA,IAAZ;AAAkBE,QAAAA,QAAQ,EAARA;AAAlB,SAAd;AACD,KALH,EAMGkB,KANH,CAMS,UAAAC,GAAG,EAAI;AAAE;AAAQ,KAN1B;AAOD,GATQ,EASN,CAACV,IAAD,CATM,CAAT;AAWAtB,EAAAA,SAAS,CAAC,YAAM;AAEd,QAAM,CAACsB,IAAI,CAACR,QAAP,IAAqBQ,IAAI,CAACT,QAA/B,EAA2C;AAAE;AAAQ;;AAErDc,IAAAA,KAAK,CAAC,sBAAD,CAAL,CACGC,IADH,CACQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KADX,EAEGF,IAFH,CAEQ,UAACjB,IAAD,EAAU;AACd,UAAME,QAAQ,GAAG,IAAjB;AACA,aAAOU,OAAO,mBAAMD,IAAN;AAAYX,QAAAA,IAAI,EAAJA,IAAZ;AAAkBE,QAAAA,QAAQ,EAARA;AAAlB,SAAd;AACD,KALH,EAMGkB,KANH,CAMS,UAAAC,GAAG,EAAI,CAAE,CANlB;AAOD,GAXQ,EAWN,CAACV,IAAD,CAXM,CAAT;AAaA,SACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEA,IAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAC,GAAlB;AAAsB,IAAA,SAAS,EAAEb,OAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAC,WAAlB;AAA8B,IAAA,SAAS,EAAEF,IAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGI,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAuB,IAAA,SAAS,EAAEC,OAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CAFF,CAFF,CADF;AAeD,CAvED;;AAyEA,eAAeE,GAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\n\nimport AuthContext from './context/AuthContext';\nimport TokenStore from './lib/TokenStore';\n\nimport Home from './pages/Home/home';\nimport Contact from './pages/Main/Contact';\nimport Landing from './pages/Landing/Landing';\n\nconst App = () => {\n\n  const [auth, setAuth] = useState({\n    user: undefined,\n    isLoaded: false,\n    newStory: false,\n    authToken: TokenStore.getToken(),\n    onLogin: handleLogin,\n    updateLoaded: updateLoaded,\n    updateDidMount: updateDidMount,\n    updateNewStory: updateNewStory,\n  })\n\n  const [didMount, setDidMount] = useState(false);\n\n  const handleLogin = (user, authToken) => {\n    TokenStore.setToken(authToken);\n    setAuth({ ...auth, user, authToken });\n  };\n  \n  function updateLoaded(user, isLoaded, newStory) {\n    setAuth({...auth, user, isLoaded, newStory})\n  }\n\n  function updateDidMount() {\n    setDidMount(false);\n  }\n  \n  function updateNewStory(user, newStory) {\n    setAuth({...auth, user, newStory});\n  }\n\n  useEffect(() => {\n    if (!auth.user) { return }\n    fetch('/api/users/portfolio')\n      .then(res => res.json())\n      .then((user) => {\n        const isLoaded = true;\n        return setAuth({ ...auth, user, isLoaded })\n      })\n      .catch(err => { return });\n  }, [auth]);\n\n  useEffect(() => {\n\n    if ( (!auth.newStory) && (auth.isLoaded) ) { return }\n\n    fetch('/api/users/portfolio')\n      .then(res => res.json())\n      .then((user) => {\n        const isLoaded = true;\n        return setAuth({ ...auth, user, isLoaded })\n      })\n      .catch(err => {});\n  }, [auth]);\n\n  return (\n    <AuthContext.Provider value={auth}>\n\n      <div className=\"App\">\n\n        <Switch>\n            <Route exact path=\"/\" component={Landing} />\n            <Route exact path=\"/showcase\" component={Home} />\n            <Route path=\"/contact\" component={Contact} />\n        </Switch>\n\n      </div>\n\n    </AuthContext.Provider>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}